<!-- Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT License. See LICENSE in the project root for license information. -->
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:primitives="clr-namespace:ModernWpf.Controls.Primitives">

    <Style x:Key="DefaultProgressBarStyle" TargetType="ProgressBar">
        <Setter Property="OverridesDefaultStyle" Value="True" />
        <Setter Property="Foreground" Value="{DynamicResource SystemControlHighlightAccentBrush}" />
        <Setter Property="Background" Value="{DynamicResource SystemControlBackgroundBaseLowBrush}" />
        <Setter Property="BorderThickness" Value="{DynamicResource ProgressBarBorderThemeThickness}" />
        <Setter Property="BorderBrush" Value="{DynamicResource SystemControlHighlightTransparentBrush}" />
        <Setter Property="MinHeight" Value="{DynamicResource ProgressBarThemeMinHeight}" />
        <Setter Property="IsTabStop" Value="False" />
        <Setter Property="VerticalAlignment" Value="Center" />
        <Setter Property="primitives:ControlHelper.CornerRadius" Value="{DynamicResource ControlCornerRadius}" />
        <Setter Property="primitives:ProgressBarHelper.IsEnabled" Value="True" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ProgressBar">
                    <Grid ClipToBounds="True">
                        <Grid.Resources>
                            <primitives:CornerRadiusFilterConverter x:Key="TopLeftCornerRadiusDoubleValueConverter" Filter="TopLeftValue" />
                            <primitives:CornerRadiusFilterConverter x:Key="BottomRightCornerRadiusDoubleValueConverter" Filter="BottomRightValue" />
                            <Storyboard
                                x:Key="IndeterminateStoryboard"
                                RepeatBehavior="Forever">
                                <DoubleAnimation
                                    Storyboard.TargetName="IndeterminateRoot"
                                    Duration="0:0:3.917"
                                    Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)"
                                    From="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=(primitives:ProgressBarHelper.ContainerAnimationStartPosition)}"
                                    To="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=(primitives:ProgressBarHelper.ContainerAnimationEndPosition)}" />
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)" Storyboard.TargetName="E1">
                                    <EasingDoubleKeyFrame KeyTime="0" Value="0" />
                                    <SplineDoubleKeyFrame KeyTime="0:0:1" Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=(primitives:ProgressBarHelper.EllipseAnimationWellPosition)}" KeySpline="0.4,0,0.6,1" />
                                    <EasingDoubleKeyFrame KeyTime="0:0:2" Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=(primitives:ProgressBarHelper.EllipseAnimationWellPosition)}" />
                                    <SplineDoubleKeyFrame KeyTime="0:0:3" Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=(primitives:ProgressBarHelper.EllipseAnimationEndPosition)}" KeySpline="0.4,0,0.6,1" />
                                </DoubleAnimationUsingKeyFrames>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)" Storyboard.TargetName="E2">
                                    <EasingDoubleKeyFrame KeyTime="0" Value="0" />
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.167" Value="0" />
                                    <SplineDoubleKeyFrame KeyTime="0:0:1.167" Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=(primitives:ProgressBarHelper.EllipseAnimationWellPosition)}" KeySpline="0.4,0,0.6,1" />
                                    <EasingDoubleKeyFrame KeyTime="0:0:2.167" Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=(primitives:ProgressBarHelper.EllipseAnimationWellPosition)}" />
                                    <SplineDoubleKeyFrame KeyTime="0:0:3.167" Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=(primitives:ProgressBarHelper.EllipseAnimationEndPosition)}" KeySpline="0.4,0,0.6,1" />
                                </DoubleAnimationUsingKeyFrames>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)" Storyboard.TargetName="E3">
                                    <EasingDoubleKeyFrame KeyTime="0" Value="0" />
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.333" Value="0" />
                                    <SplineDoubleKeyFrame KeyTime="0:0:1.333" Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=(primitives:ProgressBarHelper.EllipseAnimationWellPosition)}" KeySpline="0.4,0,0.6,1" />
                                    <EasingDoubleKeyFrame KeyTime="0:0:2.333" Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=(primitives:ProgressBarHelper.EllipseAnimationWellPosition)}" />
                                    <SplineDoubleKeyFrame KeyTime="0:0:3.333" Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=(primitives:ProgressBarHelper.EllipseAnimationEndPosition)}" KeySpline="0.4,0,0.6,1" />
                                </DoubleAnimationUsingKeyFrames>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)" Storyboard.TargetName="E4">
                                    <EasingDoubleKeyFrame KeyTime="0" Value="0" />
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0" />
                                    <SplineDoubleKeyFrame KeyTime="0:0:1.5" Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=(primitives:ProgressBarHelper.EllipseAnimationWellPosition)}" KeySpline="0.4,0,0.6,1" />
                                    <EasingDoubleKeyFrame KeyTime="0:0:2.5" Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=(primitives:ProgressBarHelper.EllipseAnimationWellPosition)}" />
                                    <SplineDoubleKeyFrame KeyTime="0:0:3.5" Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=(primitives:ProgressBarHelper.EllipseAnimationEndPosition)}" KeySpline="0.4,0,0.6,1" />
                                </DoubleAnimationUsingKeyFrames>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)" Storyboard.TargetName="E5">
                                    <EasingDoubleKeyFrame KeyTime="0" Value="0" />
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.667" Value="0" />
                                    <SplineDoubleKeyFrame KeyTime="0:0:1.667" Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=(primitives:ProgressBarHelper.EllipseAnimationWellPosition)}" KeySpline="0.4,0,0.6,1" />
                                    <EasingDoubleKeyFrame KeyTime="0:0:2.667" Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=(primitives:ProgressBarHelper.EllipseAnimationWellPosition)}" />
                                    <SplineDoubleKeyFrame KeyTime="0:0:3.667" Value="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=(primitives:ProgressBarHelper.EllipseAnimationEndPosition)}" KeySpline="0.4,0,0.6,1" />
                                </DoubleAnimationUsingKeyFrames>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)" Storyboard.TargetName="B1">
                                    <EasingDoubleKeyFrame KeyTime="0" Value="-50" />
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0" />
                                    <EasingDoubleKeyFrame KeyTime="0:0:2" Value="0" />
                                    <EasingDoubleKeyFrame KeyTime="0:0:3" Value="100" />
                                </DoubleAnimationUsingKeyFrames>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)" Storyboard.TargetName="B2">
                                    <EasingDoubleKeyFrame KeyTime="0" Value="-50" />
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.667" Value="0" />
                                    <EasingDoubleKeyFrame KeyTime="0:0:2.167" Value="0" />
                                    <EasingDoubleKeyFrame KeyTime="0:0:3.167" Value="100" />
                                </DoubleAnimationUsingKeyFrames>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)" Storyboard.TargetName="B3">
                                    <EasingDoubleKeyFrame KeyTime="0" Value="-50" />
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.833" Value="0" />
                                    <EasingDoubleKeyFrame KeyTime="0:0:2.333" Value="0" />
                                    <EasingDoubleKeyFrame KeyTime="0:0:3.333" Value="100" />
                                </DoubleAnimationUsingKeyFrames>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)" Storyboard.TargetName="B4">
                                    <EasingDoubleKeyFrame KeyTime="0" Value="-50" />
                                    <EasingDoubleKeyFrame KeyTime="0:0:1" Value="0" />
                                    <EasingDoubleKeyFrame KeyTime="0:0:2.5" Value="0" />
                                    <EasingDoubleKeyFrame KeyTime="0:0:3.5" Value="100" />
                                </DoubleAnimationUsingKeyFrames>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)" Storyboard.TargetName="B5">
                                    <EasingDoubleKeyFrame KeyTime="0" Value="-50" />
                                    <EasingDoubleKeyFrame KeyTime="0:0:1.167" Value="0" />
                                    <EasingDoubleKeyFrame KeyTime="0:0:2.667" Value="0" />
                                    <EasingDoubleKeyFrame KeyTime="0:0:3.667" Value="100" />
                                </DoubleAnimationUsingKeyFrames>
                                <DoubleAnimation
                                    Storyboard.TargetName="IndeterminateRoot"
                                    Storyboard.TargetProperty="Opacity"
                                    To="1"
                                    Duration="0" />
                                <DoubleAnimation
                                    Storyboard.TargetName="DeterminateRoot"
                                    Storyboard.TargetProperty="Opacity"
                                    To="0"
                                    Duration="0" />
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="Opacity" Storyboard.TargetName="E1">
                                    <DiscreteDoubleKeyFrame KeyTime="0" Value="1" />
                                    <DiscreteDoubleKeyFrame KeyTime="0:0:3" Value="0" />
                                </DoubleAnimationUsingKeyFrames>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="Opacity" Storyboard.TargetName="E2">
                                    <DiscreteDoubleKeyFrame KeyTime="0" Value="0" />
                                    <DiscreteDoubleKeyFrame KeyTime="0:0:0.167" Value="1" />
                                    <DiscreteDoubleKeyFrame KeyTime="0:0:3.167" Value="0" />
                                </DoubleAnimationUsingKeyFrames>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="Opacity" Storyboard.TargetName="E3">
                                    <DiscreteDoubleKeyFrame KeyTime="0" Value="0" />
                                    <DiscreteDoubleKeyFrame KeyTime="0:0:0.333" Value="1" />
                                    <DiscreteDoubleKeyFrame KeyTime="0:0:3.333" Value="0" />
                                </DoubleAnimationUsingKeyFrames>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="Opacity" Storyboard.TargetName="E4">
                                    <DiscreteDoubleKeyFrame KeyTime="0" Value="0" />
                                    <DiscreteDoubleKeyFrame KeyTime="0:0:0.5" Value="1" />
                                    <DiscreteDoubleKeyFrame KeyTime="0:0:3.5" Value="0" />
                                </DoubleAnimationUsingKeyFrames>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="Opacity" Storyboard.TargetName="E5">
                                    <DiscreteDoubleKeyFrame KeyTime="0" Value="0" />
                                    <DiscreteDoubleKeyFrame KeyTime="0:0:0.667" Value="1" />
                                    <DiscreteDoubleKeyFrame KeyTime="0:0:3.667" Value="0" />
                                </DoubleAnimationUsingKeyFrames>
                            </Storyboard>
                        </Grid.Resources>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Determinate" />
                                <VisualState x:Name="Indeterminate" Storyboard="{StaticResource IndeterminateStoryboard}" />
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Grid
                            x:Name="IndeterminateRoot"
                            Opacity="0">
                            <Grid.RenderTransform>
                                <TranslateTransform />
                            </Grid.RenderTransform>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <Border
                                x:Name="B1"
                                Grid.Column="8"
                                RenderTransformOrigin="0.5,0.5">
                                <Border.RenderTransform>
                                    <TranslateTransform />
                                </Border.RenderTransform>
                                <Ellipse
                                    x:Name="E1"
                                    Fill="{TemplateBinding Foreground}"
                                    Width="{TemplateBinding primitives:ProgressBarHelper.EllipseDiameter}"
                                    Height="{TemplateBinding primitives:ProgressBarHelper.EllipseDiameter}"
                                    RenderTransformOrigin="0.5,0.5">
                                    <Ellipse.RenderTransform>
                                        <TranslateTransform />
                                    </Ellipse.RenderTransform>
                                </Ellipse>
                            </Border>
                            <Rectangle
                                Grid.Column="7"
                                Width="{TemplateBinding primitives:ProgressBarHelper.EllipseOffset}" />
                            <Border
                                x:Name="B2"
                                Grid.Column="6"
                                RenderTransformOrigin="0.5,0.5">
                                <Border.RenderTransform>
                                    <TranslateTransform />
                                </Border.RenderTransform>
                                <Ellipse
                                    x:Name="E2"
                                    Fill="{TemplateBinding Foreground}"
                                    Width="{TemplateBinding primitives:ProgressBarHelper.EllipseDiameter}"
                                    Height="{TemplateBinding primitives:ProgressBarHelper.EllipseDiameter}"
                                    RenderTransformOrigin="0.5,0.5">
                                    <Ellipse.RenderTransform>
                                        <TranslateTransform />
                                    </Ellipse.RenderTransform>
                                </Ellipse>
                            </Border>
                            <Rectangle
                                Grid.Column="5"
                                Width="{TemplateBinding primitives:ProgressBarHelper.EllipseOffset}" />
                            <Border
                                x:Name="B3"
                                Grid.Column="4"
                                RenderTransformOrigin="0.5,0.5">
                                <Border.RenderTransform>
                                    <TranslateTransform />
                                </Border.RenderTransform>
                                <Ellipse
                                    x:Name="E3"
                                    Fill="{TemplateBinding Foreground}"
                                    Width="{TemplateBinding primitives:ProgressBarHelper.EllipseDiameter}"
                                    Height="{TemplateBinding primitives:ProgressBarHelper.EllipseDiameter}"
                                    RenderTransformOrigin="0.5,0.5">
                                    <Ellipse.RenderTransform>
                                        <TranslateTransform />
                                    </Ellipse.RenderTransform>
                                </Ellipse>
                            </Border>
                            <Rectangle
                                Grid.Column="3"
                                Width="{TemplateBinding primitives:ProgressBarHelper.EllipseOffset}" />
                            <Border
                                x:Name="B4"
                                Grid.Column="2"
                                RenderTransformOrigin="0.5,0.5">
                                <Border.RenderTransform>
                                    <TranslateTransform />
                                </Border.RenderTransform>
                                <Ellipse
                                    x:Name="E4"
                                    Fill="{TemplateBinding Foreground}"
                                    Width="{TemplateBinding primitives:ProgressBarHelper.EllipseDiameter}"
                                    Height="{TemplateBinding primitives:ProgressBarHelper.EllipseDiameter}"
                                    RenderTransformOrigin="0.5,0.5">
                                    <Ellipse.RenderTransform>
                                        <TranslateTransform />
                                    </Ellipse.RenderTransform>
                                </Ellipse>
                            </Border>
                            <Rectangle
                                Grid.Column="1"
                                Width="{TemplateBinding primitives:ProgressBarHelper.EllipseOffset}" />
                            <Border
                                x:Name="B5"
                                Grid.Column="0"
                                RenderTransformOrigin="0.5,0.5">
                                <Border.RenderTransform>
                                    <TranslateTransform />
                                </Border.RenderTransform>
                                <Ellipse
                                    x:Name="E5"
                                    Fill="{TemplateBinding Foreground}"
                                    Width="{TemplateBinding primitives:ProgressBarHelper.EllipseDiameter}"
                                    Height="{TemplateBinding primitives:ProgressBarHelper.EllipseDiameter}"
                                    RenderTransformOrigin="0.5,0.5">
                                    <Ellipse.RenderTransform>
                                        <TranslateTransform />
                                    </Ellipse.RenderTransform>
                                </Ellipse>
                            </Border>
                        </Grid>
                        <Border
                            x:Name="DeterminateRoot"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="{TemplateBinding primitives:ControlHelper.CornerRadius}">
                            <Grid>
                                <Rectangle x:Name="PART_Track" />
                                <Rectangle
                                    x:Name="PART_Indicator"
                                    Margin="{TemplateBinding Padding}"
                                    Fill="{TemplateBinding Foreground}"
                                    HorizontalAlignment="Left"
                                    RadiusX="{Binding Path=(primitives:ControlHelper.CornerRadius), RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource TopLeftCornerRadiusDoubleValueConverter}}"
                                    RadiusY="{Binding Path=(primitives:ControlHelper.CornerRadius), RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BottomRightCornerRadiusDoubleValueConverter}}" />
                            </Grid>
                        </Border>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="ProgressBar" BasedOn="{StaticResource DefaultProgressBarStyle}" />

</ResourceDictionary>